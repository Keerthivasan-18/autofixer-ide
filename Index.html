<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoFixer Main IDE Workspace</title>
    
    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#135bec",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        
        .code-font {
            font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
        }
        
        .code-editor {
            outline: none;
            resize: none;
            tab-size: 4;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 h-screen overflow-hidden flex flex-col">
    
    <!-- Top Toolbar -->
    <header class="border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-background-dark/50 px-4 h-14 flex items-center justify-between">
        <!-- Left Section: Logo & Actions -->
        <div class="flex items-center gap-4">
            <!-- Logo -->
            <div class="flex items-center gap-2">
                <div class="bg-primary rounded p-1">
                    <span class="material-symbols-outlined text-white text-xl">terminal</span>
                </div>
                <h1 class="font-bold text-sm tracking-tight">
                    AutoFixer <span class="text-primary font-medium">IDE</span>
                </h1>
            </div>
            
            <!-- Divider -->
            <div class="h-6 w-[1px] bg-slate-200 dark:bg-slate-800"></div>
            
            <!-- Action Buttons -->
            <div class="flex items-center gap-1">
                <button id="newProjectBtn" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors" title="New Project">
                    <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">create_new_folder</span>
                </button>
                <button id="newFileBtn" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors" title="New File">
                    <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">note_add</span>
                </button>
                <button id="newFolderBtn" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors" title="New Folder">
                    <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">folder</span>
                </button>
                <button id="saveBtn" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors" title="Save All">
                    <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">save</span>
                </button>
            </div>
        </div>
        
        <!-- Right Section: Run Button & Settings -->
        <div class="flex items-center gap-3">
            <div id="connectionStatus" class="flex items-center gap-2 text-xs px-3 py-1.5 rounded-lg bg-slate-100 dark:bg-slate-800">
                <span class="w-2 h-2 rounded-full bg-slate-400" id="statusIndicator"></span>
                <span id="statusText">Connecting...</span>
            </div>
            <button id="projectManagerBtn" class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 px-4 py-1.5 rounded-lg text-sm font-semibold transition-all">
                <span class="material-symbols-outlined text-sm">dashboard</span>
                Project Manager
            </button>
            <button id="runBtn" class="flex items-center gap-2 bg-primary hover:bg-blue-600 text-white px-4 py-1.5 rounded-lg text-sm font-semibold transition-all shadow-sm">
                <span class="material-symbols-outlined text-sm">play_arrow</span>
                Run
            </button>
            <button id="themeToggle" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded transition-colors" title="Toggle Theme">
                <span class="material-symbols-outlined text-slate-500 dark:text-slate-400">dark_mode</span>
            </button>
            <div class="size-8 rounded-full bg-slate-200 dark:bg-slate-800 overflow-hidden ml-2 border border-slate-300 dark:border-slate-700">
                <img class="w-full h-full object-cover" alt="User avatar" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCl7aVZQFuB9Bs9w9JXAClDwZ8hM46zUdCsYLJ4PPRQV0fugDUY8AN2v7NJ18VNEkAc-gn3qicgNNSKzBYAPekaU-ArGsllz8TEKIrSogo9B0GKXXWALmtSdlyn6CNaaFccbbQbI5MxhBNS08SQl7M_pyMP5VN8tKlW5rIJx_NVigHRCWD0IS2xXwgFneHf-5uUR0ThF8a3WhVE05a5h7UvDodHDy7fcKKjvgI0n8ir30nsqWiKOIasJYXoWL7S9NtcOA_HJRFqmj7z">
            </div>
        </div>
    </header>
    
    <!-- Main Workspace -->
    <main class="flex-1 flex overflow-hidden">
        
        <!-- Sidebar: File Explorer -->
        <aside class="w-64 border-r border-slate-200 dark:border-slate-800 flex flex-col bg-white dark:bg-background-dark/30 overflow-y-auto">
            <div class="p-4 flex-1">
                <!-- Explorer Header -->
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs font-bold uppercase tracking-wider text-slate-400">Explorer</span>
                    <span class="material-symbols-outlined text-xs text-slate-400 cursor-pointer">more_horiz</span>
                </div>
                
                <!-- File Tree Container -->
                <div id="fileTree" class="space-y-1">
                    <!-- Empty state -->
                    <div id="emptyState" class="flex flex-col items-center justify-center py-12 text-center">
                        <span class="material-symbols-outlined text-4xl text-slate-300 dark:text-slate-700 mb-3">folder_open</span>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-2">No project open</p>
                        <button id="createProjectBtn" class="text-xs text-primary hover:underline">Create New Project</button>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar Footer -->
            <div class="mt-auto p-4 border-t border-slate-200 dark:border-slate-800">
                <div class="flex flex-col gap-2">
                    <div class="flex items-center gap-2 text-xs text-slate-500">
                        <span class="material-symbols-outlined text-sm">cloud_done</span>
                        <span id="syncStatus">No project</span>
                    </div>
                    <button class="w-full bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 text-xs font-bold py-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                        Upgrade Pro
                    </button>
                </div>
            </div>
        </aside>
        
        <!-- Editor and Panels Container -->
        <section class="flex-1 flex flex-col min-w-0 bg-white dark:bg-[#0d1117]">
            
            <!-- Welcome Screen (shown when no file is open) -->
            <div id="welcomeScreen" class="flex-1 flex flex-col items-center justify-center">
                <span class="material-symbols-outlined text-6xl text-slate-300 dark:text-slate-700 mb-4">description</span>
                <h2 class="text-xl font-bold text-slate-700 dark:text-slate-300 mb-2">Welcome to AutoFixer IDE</h2>
                <p class="text-sm text-slate-500 dark:text-slate-400 mb-6">Create a new project or open a file to get started</p>
                <div class="flex gap-3">
                    <button id="welcomeNewProject" class="flex items-center gap-2 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all">
                        <span class="material-symbols-outlined text-sm">add</span>
                        New Project
                    </button>
                    <button id="welcomeOpenProject" class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 px-4 py-2 rounded-lg text-sm font-semibold transition-all">
                        <span class="material-symbols-outlined text-sm">folder_open</span>
                        Open Project
                    </button>
                </div>
            </div>
            
            <!-- Editor Container (hidden initially) -->
            <div id="editorContainer" class="flex-1 flex-col min-w-0" style="display: none;">
                <!-- Editor Header: Tabs -->
                <div id="tabBar" class="flex border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-background-dark/20 h-10">
                    <!-- Tabs will be dynamically added here -->
                </div>
                
                <!-- Breadcrumbs -->
                <div id="breadcrumbs" class="flex items-center px-4 py-1.5 text-[11px] text-slate-400 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#0d1117]">
                    <!-- Breadcrumbs will be dynamically updated -->
                </div>
                
                <!-- Main Editor Area -->
                <div class="flex-1 overflow-auto flex bg-white dark:bg-[#0d1117]">
                    <!-- Line Numbers -->
                    <div id="lineNumbers" class="w-12 flex-none bg-slate-50 dark:bg-[#0d1117] border-r border-slate-200 dark:border-slate-800 text-right pr-3 py-4 select-none code-font text-xs text-slate-400">
                        <div>1</div>
                    </div>
                    
                    <!-- Code Editor (Editable Textarea) -->
                    <textarea 
                        id="codeEditor"
                        class="flex-1 p-4 code-font text-sm leading-6 bg-transparent text-slate-900 dark:text-slate-100 code-editor border-0"
                        placeholder="Start typing your code here..."
                        spellcheck="false"
                    ></textarea>
                </div>
                
                <!-- Bottom Panel: Console/Errors -->
                <div class="h-48 border-t border-slate-200 dark:border-slate-800 flex flex-col bg-white dark:bg-background-dark/50">
                    <!-- Panel Tabs -->
                    <div class="flex items-center px-4 bg-slate-50 dark:bg-background-dark/80 border-b border-slate-200 dark:border-slate-800">
                        <button id="consoleTab" class="px-4 py-2 text-xs font-bold border-b-2 border-primary text-primary">
                            Output Console
                        </button>
                        <button id="errorTab" class="px-4 py-2 text-xs font-bold text-slate-500 flex items-center gap-1.5">
                            Error Panel
                            <span class="bg-red-500 text-white text-[10px] size-4 flex items-center justify-center rounded-full hidden" id="errorCount">0</span>
                        </button>
                        <button id="terminalTab" class="px-4 py-2 text-xs font-bold text-slate-500">
                            Terminal
                        </button>
                        
                        <!-- Panel Actions -->
                        <div class="ml-auto flex items-center gap-3">
                            <span class="material-symbols-outlined text-sm text-slate-400 cursor-pointer" id="clearConsole" title="Clear Console">block</span>
                            <span class="material-symbols-outlined text-sm text-slate-400 cursor-pointer" id="closePanel" title="Close Panel">close</span>
                        </div>
                    </div>
                    
                    <!-- Panel Content -->
                    <div id="consoleContent" class="flex-1 p-4 overflow-auto code-font text-xs text-slate-600 dark:text-slate-400">
                        <!-- Console output will appear here -->
                    </div>
                </div>
                
                <!-- Status Bar -->
                <footer class="h-6 bg-primary dark:bg-primary flex items-center justify-between px-3 text-[10px] text-white/90 select-none">
                    <!-- Left Section -->
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-1">
                            <span class="material-symbols-outlined text-[12px]">settings_ethernet</span>
                            <span id="branchName">main</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="material-symbols-outlined text-[12px]">sync</span>
                            <span>UTF-8</span>
                        </div>
                    </div>
                    
                    <!-- Right Section -->
                    <div class="flex items-center gap-4">
                        <span id="cursorPosition">Line 1, Col 1</span>
                        <span>Spaces: 4</span>
                        <div class="flex items-center gap-1">
                            <span class="material-symbols-outlined text-[12px]">code</span>
                            <span id="fileType">Java</span>
                        </div>
                        <span class="material-symbols-outlined text-[12px] cursor-pointer">notifications</span>
                    </div>
                </footer>
            </div>
        </section>
    </main>
    
    <!-- New Project Modal -->
    <div id="newProjectModal" class="modal">
        <div class="bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-[500px] max-w-[90vw]">
            <div class="p-6 border-b border-slate-200 dark:border-slate-800">
                <h2 class="text-xl font-bold text-slate-900 dark:text-slate-100">Create New Project</h2>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">Choose a project template to get started</p>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Project Name</label>
                    <input 
                        type="text" 
                        id="projectNameInput"
                        class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
                        placeholder="MyJavaProject"
                    >
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Project Template</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors">
                            <input type="radio" name="projectTemplate" value="empty" checked class="text-primary">
                            <div class="flex-1">
                                <div class="font-medium text-sm text-slate-900 dark:text-slate-100">Empty Java Project</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400">Start with a blank project</div>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors">
                            <input type="radio" name="projectTemplate" value="basic" class="text-primary">
                            <div class="flex-1">
                                <div class="font-medium text-sm text-slate-900 dark:text-slate-100">Basic Java Application</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400">Includes Main.java with basic structure</div>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors">
                            <input type="radio" name="projectTemplate" value="maven" class="text-primary">
                            <div class="flex-1">
                                <div class="font-medium text-sm text-slate-900 dark:text-slate-100">Maven Project</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400">Maven structure with pom.xml</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-3">
                <button id="cancelProjectBtn" class="px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors">
                    Cancel
                </button>
                <button id="createProjectConfirm" class="px-4 py-2 text-sm font-medium bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors">
                    Create Project
                </button>
            </div>
        </div>
    </div>
    
    <!-- Project Manager Modal -->
    <div id="projectManagerModal" class="modal">
        <div class="bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-[700px] max-w-[90vw] max-h-[80vh] overflow-hidden flex flex-col">
            <div class="p-6 border-b border-slate-200 dark:border-slate-800">
                <h2 class="text-xl font-bold text-slate-900 dark:text-slate-100">Project Manager</h2>
                <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">Manage all your projects in one place</p>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div id="projectList" class="space-y-3">
                    <!-- Projects will be dynamically added here -->
                    <div class="text-center py-12 text-slate-500 dark:text-slate-400">
                        <span class="material-symbols-outlined text-4xl mb-2">folder_off</span>
                        <p class="text-sm">Loading projects...</p>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-slate-200 dark:border-slate-800 flex justify-between">
                <button id="newProjectFromManager" class="flex items-center gap-2 px-4 py-2 text-sm font-medium bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors">
                    <span class="material-symbols-outlined text-sm">add</span>
                    New Project
                </button>
                <button id="closeProjectManager" class="px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="script.js"></script>
    
</body>
</html>